cmf_routing:
    chain:
        routers_by_id:
            cmf_routing.dynamic_router: 20
            router.default: 100
    dynamic:
        enabled: true
        controllers_by_type:
            demo_alias: test.controller:aliasAction
        controllers_by_class:
            Symfony\Cmf\Bundle\RoutingBundle\Doctrine\Phpcr\RedirectRoute:  cmf_routing.redirect_controller:redirectAction
        persistence:
            phpcr:
                enabled: true
                route_basepath: /test/routing

cmf_routing_auto:
    mappings:
        # e.g. /cms/auto-route/blog/my-blogs-title
        Symfony\Cmf\Bundle\RoutingAutoBundle\Tests\Resources\Document\Blog:
            url_schema: /cms/auto-route/blog/%blog_name%
            provider:
                blog_name:
                    provider:
                        name: content_method
                        options:
                            method: getTitle
                    exists_action:
                        strategy: auto_increment
                        options:
                            pattern: -%d
                    not_exists_action:
                        strategy: create

        # e.g. /cms/auto-route/blog/my-blogs-title/2013-04-09/my-post-title
        Symfony\Cmf\Bundle\RoutingAutoBundle\Tests\Resources\Document\Post:
            url_schema: /cms/auto-route/blog/%blog_name%/%date%/%post_title%
            provider:
                blog_title:
                    provider: [ content_method, { method: getBlogTitle } ]
                    exists_action: use
                    not_exists_action: throw_exception
                date:
                    provider:
                        name: content_datetime
                        options:
                            method: getDate
                            date_format: Y/m/d
                    exists_action: use
                    not_exists_action: create
                post_title:
                    provider: [ content_method, { method: getTitle } ]
                    exists_action: [ auto_increment, { pattern: -%d } ]
                    not_exists_action: [ create ]

        # Article document for multilang tests
        Symfony\Cmf\Bundle\RoutingAutoBundle\Tests\Resources\Document\Article:
            url_schema: /test/auto_route/articles/%locale%/%article_title%
            provider:
                locale:
                    provider: [ locale ]
                    exists_action: use
                    not_exists_action: create
                article_title:
                    provider: [ content_method, { method: getTitle } ]
                    exists_action: [ auto_increment, { pattern: -%d } ]
                    not_exists_action: create

        # AbstractContent for ensuring that parent class mapping works
        Symfony\Cmf\Bundle\RoutingAutoBundle\Tests\Resources\Document\AbstractContent:
            url_schema: /test/auto_route/articles/%article_title%
            provider:
                article_title:
                    provider: [ content_method, { method: getTitle } ]
                    exists_action: [ auto_increment, { pattern: -%d } ]
                    not_exists_action: create
